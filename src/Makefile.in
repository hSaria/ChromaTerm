## This program is protected under the GNU GPL (See COPYING)

CC = @CC@
MAKE = @MAKE@

prefix = @prefix@
exec_prefix = @exec_prefix@
bindir = ${DESTDIR}@bindir@
CFLAGS += -pthread -O2 -Wall -Wextra
LIBS = @LIBS@
DEFAULT_FILE_DIR = $(HOME)

OFILES = config.o data.o files.o highlight.o io.o main.o misc.o parse.o \
         session.o tables.o terminal.o utils.o

default: all

all:	ct

ct: Makefile $(OFILES) defs.h
	$(CC) $(CFLAGS) -o $@ $(OFILES) $(LIBS)
	rm -f $(OFILES)

keepcompiled: Makefile $(OFILES) defs.h
	$(CC) $(CFLAGS) -o $@ $(OFILES) $(LIBS)

Makefile: Makefile.in
	@echo "You need to run ./configure first; then try make."
	@exit 1

install: ct
	-mkdir -p $(bindir)
	cp ct $(bindir)

uninstall:
	rm -f $(bindir)/ct

# Autocompile all .c files into .o files using this rule:
.c.o:
	$(CC) $(CFLAGS) -c $<

clean:
	rm -f $(OFILES) config.status config.log

test:
	./ct -c ../.chromatermrc -e ../.test.sh

distclean:
	rm -f *.o config.status config.log ct Makefile config.h
